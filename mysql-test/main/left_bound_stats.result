create table users (
city varchar(100)
);
set histogram_size=10;
insert into users select 'Moscow' from seq_1_to_99;
insert into users select 'Helsinki' from seq_1_to_2;
set histogram_type=json;
analyze table users persistent for all;
Table	Op	Msg_type	Msg_text
test.users	analyze	status	Engine-independent statistics collected
test.users	analyze	status	OK
SELECT histogram FROM mysql.column_stats WHERE table_name='users';
histogram
[
  "Helsinki",
  "Moscow",
  "Moscow",
  "Moscow",
  "Moscow",
  "Moscow",
  "Moscow",
  "Moscow",
  "Moscow"
]
explain extended select * from users where city = 'Moscow';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	users	ALL	NULL	NULL	NULL	NULL	101	90.00	Using where
Warnings:
Note	1003	select `test`.`users`.`city` AS `city` from `test`.`users` where `test`.`users`.`city` = 'Moscow'
analyze select * from users where city = 'Moscow';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	r_rows	filtered	r_filtered	Extra
1	SIMPLE	users	ALL	NULL	NULL	NULL	NULL	101	101.00	90.00	98.02	Using where
explain extended select * from users where city = 'Helsinki';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	users	ALL	NULL	NULL	NULL	NULL	101	11.11	Using where
Warnings:
Note	1003	select `test`.`users`.`city` AS `city` from `test`.`users` where `test`.`users`.`city` = 'Helsinki'
analyze select * from users where city = 'helsinki';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	r_rows	filtered	r_filtered	Extra
1	SIMPLE	users	ALL	NULL	NULL	NULL	NULL	101	101.00	11.11	1.98	Using where
explain extended select * from users where city < 'Moscow';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	users	ALL	NULL	NULL	NULL	NULL	101	11.11	Using where
Warnings:
Note	1003	select `test`.`users`.`city` AS `city` from `test`.`users` where `test`.`users`.`city` < 'Moscow'
analyze select * from users where city < 'Moscow';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	r_rows	filtered	r_filtered	Extra
1	SIMPLE	users	ALL	NULL	NULL	NULL	NULL	101	101.00	11.11	1.98	Using where
explain extended select * from users where city >= 'Abidjan';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	users	ALL	NULL	NULL	NULL	NULL	101	100.00	Using where
Warnings:
Note	1003	select `test`.`users`.`city` AS `city` from `test`.`users` where `test`.`users`.`city` >= 'Abidjan'
analyze select * from users where city >= 'Abidjan';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	r_rows	filtered	r_filtered	Extra
1	SIMPLE	users	ALL	NULL	NULL	NULL	NULL	101	101.00	100.00	100.00	Using where
drop table users;
create table users (
city varchar(100)
);
set histogram_size=10;
insert into users select 'Moscow' from seq_1_to_2;
insert into users select 'Helsinki' from seq_1_to_99;
set histogram_type=json;
analyze table users persistent for all;
Table	Op	Msg_type	Msg_text
test.users	analyze	status	Engine-independent statistics collected
test.users	analyze	status	OK
SELECT histogram FROM mysql.column_stats WHERE table_name='users';
histogram
[
  "Helsinki",
  "Helsinki",
  "Helsinki",
  "Helsinki",
  "Helsinki",
  "Helsinki",
  "Helsinki",
  "Helsinki",
  "Helsinki",
  "Moscow"
]
explain extended select * from users where city = 'Helsinki';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	users	ALL	NULL	NULL	NULL	NULL	101	81.82	Using where
Warnings:
Note	1003	select `test`.`users`.`city` AS `city` from `test`.`users` where `test`.`users`.`city` = 'Helsinki'
analyze select * from users where city = 'helsinki';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	r_rows	filtered	r_filtered	Extra
1	SIMPLE	users	ALL	NULL	NULL	NULL	NULL	101	101.00	81.82	98.02	Using where
explain extended select * from users where city = 'Moscow';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	users	ALL	NULL	NULL	NULL	NULL	101	18.18	Using where
Warnings:
Note	1003	select `test`.`users`.`city` AS `city` from `test`.`users` where `test`.`users`.`city` = 'Moscow'
analyze select * from users where city = 'Moscow';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	r_rows	filtered	r_filtered	Extra
1	SIMPLE	users	ALL	NULL	NULL	NULL	NULL	101	101.00	18.18	1.98	Using where
explain extended select * from users where city < 'Moscow';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	users	ALL	NULL	NULL	NULL	NULL	101	90.00	Using where
Warnings:
Note	1003	select `test`.`users`.`city` AS `city` from `test`.`users` where `test`.`users`.`city` < 'Moscow'
analyze select * from users where city < 'Moscow';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	r_rows	filtered	r_filtered	Extra
1	SIMPLE	users	ALL	NULL	NULL	NULL	NULL	101	101.00	90.00	98.02	Using where
explain extended select * from users where city >= 'Abidjan';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	users	ALL	NULL	NULL	NULL	NULL	101	100.00	Using where
Warnings:
Note	1003	select `test`.`users`.`city` AS `city` from `test`.`users` where `test`.`users`.`city` >= 'Abidjan'
analyze select * from users where city >= 'Abidjan';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	r_rows	filtered	r_filtered	Extra
1	SIMPLE	users	ALL	NULL	NULL	NULL	NULL	101	101.00	100.00	100.00	Using where
